import random


class RandomizedSet:

    def __init__(self):
        self.value_index={}
        self.key=[]

    def insert(self, val: int) -> bool:
        if val in self.value_index:
            return False
        
        self.key.append(val)
        self.value_index[val]=len(self.key)
        return True
        

    def remove(self, val: int) -> bool:
        if val in self.value_index:
            
            index=self.value_index[val]
            
            self.key[index-1],self.key[-1]=self.key[-1],self.key[index-1]
            self.value_index[self.key[index-1]]=index
            self.key.pop()

            del self.value_index[val]
            
            
            return True
        
        return False

    def getRandom(self) -> int:
        return random.choice(self.key)


# Your RandomizedSet object will be instantiated and called as such:
# obj = RandomizedSet()
# param_1 = obj.insert(val)
# param_2 = obj.remove(val)
# param_3 = obj.getRandom()


# ------------------------------------------------------
# ЁЯФе ржмрж╛рж╕рзНрждржм ржЬрзАржмржирзЗрж░ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи (Insert Delete GetRandom O(1))
# ------------------------------------------------------

# ЁЯОо рзз. ржЧрзЗржо рж▓рзБржЯ рж╕рж┐рж╕рзНржЯрзЗржо (Game Loot Drop System)
# ржЙржжрж╛рж╣рж░ржгржГ PUBG, Clash Royale
# - ржкрзНрж▓рзЗрзЯрж╛рж░ ржирждрзБржи ржЖржЗржЯрзЗржо ржЖржирж▓ржХ ржХрж░рж▓рзЗ тЮд insert(item)
# - ржкрзБрж░рж╛рждржи ржЖржЗржЯрзЗржо ржмрж╛ржж ржжрж┐рж▓рзЗ тЮд remove(item)
# - рж░тАНрзНржпрж╛ржирзНржбржоржнрж╛ржмрзЗ ржирждрзБржи ржЖржЗржЯрзЗржо drop рж╣рзЯ тЮд getRandom()

# тЪЩя╕П рзи. рж▓рзЛржб ржмрзНржпрж╛рж▓рзЗржирзНрж╕рж╛рж░ (Load Balancer in Server Cluster)
# ржЙржжрж╛рж╣рж░ржгржГ Google Server Farm
# - ржирждрзБржи рж╕рж╛рж░рзНржнрж╛рж░ ржпрзБржХрзНржд ржХрж░рж▓рзЗ тЮд insert(server_id)
# - рж╕рж╛рж░рзНржнрж╛рж░ ржбрж╛ржЙржи рж╣рж▓рзЗ тЮд remove(server_id)
# - Randomly ржПржХржЯрж┐ржХрзЗ ржЪрзБржЬ ржХрж░рзЗ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржкрж╛ржарж╛ржирзЛ тЮд getRandom()

# ЁЯО░ рзй. рж▓рж╛ржХрж┐ ржбрзНрж░ / ржХрзНржпрж╛рж╕рж┐ржирзЛ ржЕрзНржпрж╛ржк
# ржЙржжрж╛рж╣рж░ржгржГ Online Spin-to-Win
# - User рж░рзЗржЬрж┐рж╕рзНржЯрж╛рж░ ржХрж░рж▓рзЗ тЮд insert(user_id)
# - User ржЗржиржЕрзНржпрж╛ржХрзНржЯрж┐ржн рж╣рж▓рзЗ тЮд remove(user_id)
# - Winner randomly pick ржХрж░рждрзЗ тЮд getRandom()

# ЁЯЫНя╕П рзк. ржлрзНрж▓рзНржпрж╛рж╢ рж╕рзЗрж▓ ржмрж╛ рж░тАНрзНржпрж╛ржирзНржбржо ржкржгрзНржпрзЗрж░ ржмрж┐ржЬрзНржЮрж╛ржкржи
# ржЙржжрж╛рж╣рж░ржгржГ Daraz ржмрж╛ Amazon
# - ржЗржи рж╕рзНржЯржХрзЗ ржЖржЗржЯрзЗржо ржПрж▓рзЗ тЮд insert(product_id)
# - ржЖржЙржЯ-ржЕржл-рж╕рзНржЯржХ рж╣рж▓рзЗ тЮд remove(product_id)
# - рж╣рзЛржоржкрзЗржЬрзЗ random ржкржгрзНржп ржжрзЗржЦрж╛рждрзЗ тЮд getRandom()

# ЁЯУ▒ рзл. ржЪрзНржпрж╛ржЯ ржЕрзНржпрж╛ржкрзЗ рж░тАНрзНржпрж╛ржирзНржбржо ржЗржЙржЬрж╛рж░ ржкрж┐ржВ
# ржЙржжрж╛рж╣рж░ржгржГ Discord, Clubhouse
# - User ржЕрзНржпрж╛ржкрзЗ ржЬрзЯрзЗржи ржХрж░рж▓рзЗ тЮд insert(user_id)
# - User рж▓рж┐ржн ржХрж░рж▓рзЗ тЮд remove(user_id)
# - Random ржнрж╛ржмрзЗ ржПржХржЬржи active user ржХрзЗ ping ржХрж░рж╛ тЮд getRandom()

# ------------------------------------------------------
# тЭЧ ржпржжрж┐ ржЖржорж░рж╛ Efficient Structure ржирж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐:
# - insert() рж╣рзЯрждрзЛ O(1), ржХрж┐ржирзНрждрзБ remove() ржмрж╛ getRandom() рж╣рждрзЗ ржкрж╛рж░рзЗ O(n)
# - ржлрж▓рзЗ рж╕рж┐рж╕рзНржЯрзЗржо ржзрзАрж░ рж╣рзЯрзЗ ржпрж╛ржмрзЗ, ржмрзЬ ржбрзЗржЯрж╛ рж╣рзНржпрж╛ржирзНржбрж▓ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛
# - latency ржмрж╛рзЬржмрзЗ, ржЗржЙржЬрж╛рж░ experience ржЦрж╛рж░рж╛ржк рж╣ржмрзЗ
# - рж░рж┐рзЯрзЗрж▓-ржЯрж╛ржЗржо ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи ржпрзЗржоржи ржЧрзЗржо, рж▓рзЛржб ржмрзНржпрж╛рж▓рзЗржирзНрж╕рж╛рж░, рж▓рж╛ржХрж┐ ржбрзНрж░ ржарж┐ржХржорждрзЛ ржХрж╛ржЬ ржХрж░ржмрзЗ ржирж╛
# - рж░рж┐рж╕рзЛрж░рзНрж╕ ржЕржкржЪрзЯ ржмрзЗрж╢рж┐ рж╣ржмрзЗ
#
# тЬЕ рждрж╛ржЗ:
# - O(1) insert, delete, ржПржмржВ getRandom ржПрж░ ржЬржирзНржп
# - RandomizedSet ржмрж╛ HashMap + List ржХржорзНржмрж┐ржирзЗрж╢ржи ржжрж░ржХрж╛рж░
# ------------------------------------------------------

# тЬЕ ржПржЗрж╕ржм рж╕ржХрж▓ ржХрзНрж╖рзЗрждрзНрж░рзЗ ржжрж░ржХрж╛рж░:
# - O(1) рж╕ржорзЯрзЗ insert
# - O(1) рж╕ржорзЯрзЗ delete
# - O(1) рж╕ржорзЯрзЗ random ржирж┐рж░рзНржмрж╛ржЪржи
# тЮд рждрж╛ржЗ RandomizedSet ржЯрж╛ржЗржкрзЗрж░ ржбрзЗржЯрж╛ рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░ ржЕржкрж░рж┐рж╣рж╛рж░рзНржпред
# ------------------------------------------------------
